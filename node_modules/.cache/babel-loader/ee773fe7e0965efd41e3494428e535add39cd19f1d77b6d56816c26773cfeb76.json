{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chaha\\\\Downloads\\\\task15Making the mails Realtime\\\\src\\\\Components\\\\Pages\\\\Sent.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { Accordion } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { messageActions } from '../Store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction removeSpecialChar(mail) {\n  let newMail = \"\";\n  for (let i = 0; i < mail.length; i++) {\n    if (mail[i] !== \"@\" && mail[i] !== \".\") {\n      newMail += mail[i];\n    }\n  }\n  return newMail;\n}\nconst Sent = () => {\n  _s();\n  const user = removeSpecialChar(useSelector(state => state.authentication.user));\n  const sentMessages = useSelector(state => state.messages.sentMessages);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    async function fetchSentMessages() {\n      try {\n        let responce = await fetch(`https://mail-data-d37a7-default-rtdb.firebaseio.com//sentmail/${user}.json`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (responce.ok) {\n          let data = await responce.json();\n          let newMessageArray = [];\n          const keys = Object.keys(data);\n          keys.forEach(key => {\n            newMessageArray.unshift({\n              ...data[key],\n              name: key\n            });\n          });\n          console.log(newMessageArray);\n          dispatch(messageActions.setSentMessages(newMessageArray));\n        } else {\n          throw new Error(\"Failed to fetch sent mails\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    let fetching = setTimeout(() => {\n      fetchSentMessages();\n    }, 3000);\n    return () => {\n      clearTimeout(fetching);\n    };\n  }, [user, dispatch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center\",\n      children: \"Sent Mails\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), sentMessages.map(message => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-12\",\n              children: /*#__PURE__*/_jsxDEV(Accordion, {\n                defaultActiveKey: \"0\",\n                children: /*#__PURE__*/_jsxDEV(Accordion.Item, {\n                  eventKey: \"1\",\n                  children: [/*#__PURE__*/_jsxDEV(Accordion.Header, {\n                    children: [\"To:\", message.receiver]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Accordion.Body, {\n                    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                      children: [\"Subject:\", message.mailSubject]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 72,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: message.mailContent\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 73,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this)\n      }, message.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 24\n      }, this);\n    })]\n  }, void 0, true);\n};\n_s(Sent, \"TR6c/1AWeI5943KCXGWiPQy/51Q=\", false, function () {\n  return [useSelector, useSelector, useDispatch];\n});\n_c = Sent;\nexport default Sent;\nvar _c;\n$RefreshReg$(_c, \"Sent\");","map":{"version":3,"names":["React","useEffect","Accordion","useDispatch","useSelector","messageActions","jsxDEV","_jsxDEV","Fragment","_Fragment","removeSpecialChar","mail","newMail","i","length","Sent","_s","user","state","authentication","sentMessages","messages","dispatch","fetchSentMessages","responce","fetch","method","headers","ok","data","json","newMessageArray","keys","Object","forEach","key","unshift","name","console","log","setSentMessages","Error","error","fetching","setTimeout","clearTimeout","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","message","defaultActiveKey","Item","eventKey","Header","receiver","Body","mailSubject","mailContent","_c","$RefreshReg$"],"sources":["C:/Users/chaha/Downloads/task15Making the mails Realtime/src/Components/Pages/Sent.js"],"sourcesContent":["import React, { useEffect } from 'react'\nimport { Accordion } from 'react-bootstrap'\nimport { useDispatch, useSelector } from 'react-redux';\nimport { messageActions } from '../Store';\n\nfunction removeSpecialChar(mail) {\n    let newMail = \"\";\n    for (let i = 0; i < mail.length; i++) {\n        if (mail[i] !== \"@\" && mail[i] !== \".\") {\n            newMail += mail[i]\n        }\n    }\n    return newMail;\n}\n\nconst Sent = () => {\n    const user = removeSpecialChar(useSelector(state => state.authentication.user));\n    const sentMessages=useSelector(state=>state.messages.sentMessages);\n    const dispatch=useDispatch();\n\n    useEffect(() => {\n        async function fetchSentMessages() {\n            try {\n                let responce = await fetch(\n                    `https://mail-data-d37a7-default-rtdb.firebaseio.com//sentmail/${(user)}.json`,\n                    {\n                        method: 'GET',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                    }\n                )\n                if (responce.ok) {\n                    let data = await responce.json();\n                    let newMessageArray = [];\n                    const keys = Object.keys(data);\n                    keys.forEach((key) => {\n                        newMessageArray.unshift({ ...data[key], name: key })\n                    });\n                    console.log(newMessageArray);\n                    dispatch(messageActions.setSentMessages(newMessageArray));\n                } else {\n                    throw new Error(\"Failed to fetch sent mails\")\n                }\n            } catch (error) {\n                console.log(error)\n            }\n        }\n        let fetching = setTimeout(() => {\n            fetchSentMessages();\n        }, 3000);\n        return () => {\n            clearTimeout(fetching);\n        }\n    }, [user, dispatch])\n\n\n    return (\n        <>\n            <h1 className='text-center'>Sent Mails</h1>\n            {sentMessages.map((message) => {\n                return <div key={message.name}>\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"col-12\">\n                                <Accordion defaultActiveKey=\"0\" >\n                                    <Accordion.Item eventKey=\"1\">\n                                        <Accordion.Header>\n                                            To:{message.receiver} \n                                        </Accordion.Header>\n                                        <Accordion.Body>\n                                            <h5>Subject:{message.mailSubject}</h5>\n                                            <p>{message.mailContent}</p>\n                                        </Accordion.Body>\n                                    </Accordion.Item>\n                                </Accordion>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            })\n            }\n        </>\n    )\n}\n\nexport default Sent\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,cAAc,QAAQ,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE1C,SAASC,iBAAiBA,CAACC,IAAI,EAAE;EAC7B,IAAIC,OAAO,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,IAAI,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;IAClC,IAAIF,IAAI,CAACE,CAAC,CAAC,KAAK,GAAG,IAAIF,IAAI,CAACE,CAAC,CAAC,KAAK,GAAG,EAAE;MACpCD,OAAO,IAAID,IAAI,CAACE,CAAC,CAAC;IACtB;EACJ;EACA,OAAOD,OAAO;AAClB;AAEA,MAAMG,IAAI,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACf,MAAMC,IAAI,GAAGP,iBAAiB,CAACN,WAAW,CAACc,KAAK,IAAIA,KAAK,CAACC,cAAc,CAACF,IAAI,CAAC,CAAC;EAC/E,MAAMG,YAAY,GAAChB,WAAW,CAACc,KAAK,IAAEA,KAAK,CAACG,QAAQ,CAACD,YAAY,CAAC;EAClE,MAAME,QAAQ,GAACnB,WAAW,EAAE;EAE5BF,SAAS,CAAC,MAAM;IACZ,eAAesB,iBAAiBA,CAAA,EAAG;MAC/B,IAAI;QACA,IAAIC,QAAQ,GAAG,MAAMC,KAAK,CACrB,iEAAiER,IAAM,OAAM,EAC9E;UACIS,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACL,cAAc,EAAE;UACpB;QACJ,CAAC,CACJ;QACD,IAAIH,QAAQ,CAACI,EAAE,EAAE;UACb,IAAIC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAI,EAAE;UAChC,IAAIC,eAAe,GAAG,EAAE;UACxB,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACH,IAAI,CAAC;UAC9BG,IAAI,CAACE,OAAO,CAAEC,GAAG,IAAK;YAClBJ,eAAe,CAACK,OAAO,CAAC;cAAE,GAAGP,IAAI,CAACM,GAAG,CAAC;cAAEE,IAAI,EAAEF;YAAI,CAAC,CAAC;UACxD,CAAC,CAAC;UACFG,OAAO,CAACC,GAAG,CAACR,eAAe,CAAC;UAC5BT,QAAQ,CAACjB,cAAc,CAACmC,eAAe,CAACT,eAAe,CAAC,CAAC;QAC7D,CAAC,MAAM;UACH,MAAM,IAAIU,KAAK,CAAC,4BAA4B,CAAC;QACjD;MACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZJ,OAAO,CAACC,GAAG,CAACG,KAAK,CAAC;MACtB;IACJ;IACA,IAAIC,QAAQ,GAAGC,UAAU,CAAC,MAAM;MAC5BrB,iBAAiB,EAAE;IACvB,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAM;MACTsB,YAAY,CAACF,QAAQ,CAAC;IAC1B,CAAC;EACL,CAAC,EAAE,CAAC1B,IAAI,EAAEK,QAAQ,CAAC,CAAC;EAGpB,oBACIf,OAAA,CAAAE,SAAA;IAAAqC,QAAA,gBACIvC,OAAA;MAAIwC,SAAS,EAAC,aAAa;MAAAD,QAAA,EAAC;IAAU;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QAAK,EAC1C/B,YAAY,CAACgC,GAAG,CAAEC,OAAO,IAAK;MAC3B,oBAAO9C,OAAA;QAAAuC,QAAA,eACHvC,OAAA;UAAKwC,SAAS,EAAC,WAAW;UAAAD,QAAA,eACtBvC,OAAA;YAAKwC,SAAS,EAAC,KAAK;YAAAD,QAAA,eAChBvC,OAAA;cAAKwC,SAAS,EAAC,QAAQ;cAAAD,QAAA,eACnBvC,OAAA,CAACL,SAAS;gBAACoD,gBAAgB,EAAC,GAAG;gBAAAR,QAAA,eAC3BvC,OAAA,CAACL,SAAS,CAACqD,IAAI;kBAACC,QAAQ,EAAC,GAAG;kBAAAV,QAAA,gBACxBvC,OAAA,CAACL,SAAS,CAACuD,MAAM;oBAAAX,QAAA,GAAC,KACX,EAACO,OAAO,CAACK,QAAQ;kBAAA;oBAAAV,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,QACL,eACnB5C,OAAA,CAACL,SAAS,CAACyD,IAAI;oBAAAb,QAAA,gBACXvC,OAAA;sBAAAuC,QAAA,GAAI,UAAQ,EAACO,OAAO,CAACO,WAAW;oBAAA;sBAAAZ,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,QAAM,eACtC5C,OAAA;sBAAAuC,QAAA,EAAIO,OAAO,CAACQ;oBAAW;sBAAAb,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,QAAK;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,QACf;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA;cACJ;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA;YACT;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA;UACV;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA;QACJ;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA;MACJ,GAjBOE,OAAO,CAAChB,IAAI;QAAAW,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAkBvB;IACV,CAAC,CAAC;EAAA,gBAEH;AAEX,CAAC;AAAAnC,EAAA,CArEKD,IAAI;EAAA,QACyBX,WAAW,EACvBA,WAAW,EACfD,WAAW;AAAA;AAAA2D,EAAA,GAHxB/C,IAAI;AAuEV,eAAeA,IAAI;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}